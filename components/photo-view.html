<!-- Defines element markup -->
<template>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/css/materialize.min.css">
  <div class="col s12" >
    <h1 class="center-align"></h1>
  </div>
  <div class="row">
    <div class="col l7 s12" >
      <div class="row" >
        <img src="" alt="" width="100%"/>
      </div>
      <div class="row center-align">
        <a class="waves-effect waves-light btn" href="" target="_blank" >View full</a>
      </div>
    </div>
    <div class="col l5 s12" >
      <p class="flow-text" >Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec tempor massa a odio convallis fermentum. Ut imperdiet arcu sed fermentum luctus. Duis placerat auctor turpis ac varius. In libero sapien, laoreet mollis felis viverra, egestas eleifend arcu. Aliquam dapibus enim a bibendum semper. Etiam elit sapien, commodo vestibulum lacus sed, congue mollis sem. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Suspendisse et nisi pulvinar, eleifend leo sit amet, semper quam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mattis rutrum tellus, dapibus efficitur arcu dignissim nec. Praesent sed rutrum orci. Quisque et urna vel orci interdum varius ac id ex. Sed magna massa, cursus sit amet posuere quis, sollicitudin pellentesque eros. Proin imperdiet nibh id urna dapibus, at luctus orci fringilla. Aenean ut enim tristique, blandit lacus sed, luctus elit. Nulla ac viverra diam, quis vestibulum sapien.</p>
      <p>Sed tincidunt mattis sapien et bibendum. Etiam sollicitudin augue ut nibh lacinia, sollicitudin pretium ante fringilla. Nam interdum diam id tellus dapibus, eu tincidunt elit interdum. Aliquam ligula nunc, vestibulum sit amet pharetra eu, vestibulum ut orci. Etiam sed urna purus. Nunc varius, velit nec sodales tincidunt, lacus justo pharetra est, a faucibus magna ante at mauris. Nam dictum ornare nunc vel interdum. Duis eget ornare justo. Phasellus non tempor quam, et rutrum sem. Etiam molestie pulvinar suscipit. Pellentesque semper, lacus ac scelerisque rhoncus, libero erat convallis diam, a interdum odio metus nec ante. Sed pellentesque tortor porttitor turpis efficitur lacinia. Quisque pharetra luctus nisi in vestibulum.</p>
      <p>Vestibulum dictum elit sed velit vehicula suscipit. Aliquam semper, nunc vel mollis semper, neque metus fermentum quam, a placerat nisi erat ornare erat. Pellentesque pulvinar, magna quis finibus placerat, metus justo elementum lectus, at elementum sem eros eget enim. Nulla tortor velit, gravida ac nibh vel, porta ornare elit. Pellentesque at fermentum elit. Maecenas pharetra tempor orci eu iaculis. Suspendisse potenti. Proin pretium condimentum venenatis.</p>
      <p>Vestibulum pellentesque orci mi, eu pellentesque felis aliquam nec. Suspendisse pharetra mattis facilisis. Nam egestas faucibus odio, sed mattis ante tincidunt sit amet. Vestibulum leo purus, efficitur porttitor ipsum luctus, bibendum imperdiet odio. Praesent nibh lacus, pulvinar non euismod sed, volutpat at augue. Pellentesque enim leo, maximus nec arcu ac, posuere pellentesque elit. Suspendisse molestie sed justo eget facilisis.</p>
      <p>Cras finibus dignissim nulla, ac porta ligula pretium vel. Vivamus non dolor lectus. Duis magna ligula, fringilla ac ex eu, aliquam semper erat. Donec non ipsum at tellus mattis sagittis fringilla quis libero. Nam aliquet rutrum libero, id finibus odio ornare hendrerit. Sed eget nulla lacinia, malesuada arcu non, commodo neque. Duis quis varius libero, ut volutpat justo.</p>
    </div>
  </div>
</template>
<script>
(function(window, document, undefined) {

    // Refers to the "importer", which is index.html
    var thatDoc = document;

    // Refers to the "importee", which is src/hello-world.html
    var thisDoc =  (thatDoc._currentScript || thatDoc.currentScript).ownerDocument;

    // Gets content from <template>
    var template = thisDoc.querySelector('template').content;

    // Creates an object based in the HTML Element prototype
    var MyElementProto = Object.create(HTMLElement.prototype);

    // Creates the "imageUrl" attribute and sets a default value
    MyElementProto.imageUrlLarge = 'cloudinary_logo';
    MyElementProto.imageUrlOriginal = 'cloudinary_logo';
    MyElementProto.imageName = 'cloudinary_logo';

    // Fires when an instance of the element is created
    MyElementProto.createdCallback = function() {
        // Creates the shadow root
        var shadowRoot = this.createShadowRoot();

        // Adds a template clone into shadow root
        var clone = thatDoc.importNode(template, true);
        shadowRoot.appendChild(clone);

        // Caches <strong> DOM query
        this.imageLargeContainer = shadowRoot.querySelector('img');
        this.imageOriginalContainer = shadowRoot.querySelector('a');
        this.nameContainer = shadowRoot.querySelector('h1');

        // Checks if the "image-url" attribute has been overwritten
        if (this.hasAttribute('image-url')) {
            var imageUrlLarge = this.getAttribute('image-url');
            this.setImageUrlLarge(imageUrlLarge);
        }
        else {
            this.setImageUrlLarge(this.imageUrlLarge);
        }
        if (this.hasAttribute('image-url-original')) {
            var imageUrlOriginal = this.getAttribute('image-url-original');
            this.setImageUrlOriginal(imageUrlOriginal);
        }
        else {
            this.setImageUrlOriginal(this.imageUrlOriginal);
        }

        // Checks if the "image-name" attribute has been overwritten
        if (this.hasAttribute('image-name')) {
            var imageName = this.getAttribute('image-name');
            this.setImageName(imageName);
        }
        else {
            this.setImageName(this.imageName);
        }
    };

    // Fires when an attribute was added, removed, or updated
    MyElementProto.attributeChangedCallback = function(attr, oldVal, newVal) {
        if (attr === 'image-url') {
            this.setImageUrlLarge(newVal);
        }
        if (attr === 'image-url-original') {
            this.setImageUrlOriginal(newVal);
        }
        if (attr === 'image-name') {
            this.setImageName(newVal);
        }
    };

    // Sets new value to "image-url" attribute
    MyElementProto.setImageUrlLarge = function(val) {
        this.imageUrlLarge = val;

        // Sets "public-id" value into <strong>
        this.imageLargeContainer.src = this.imageUrlLarge;
    };

    // Sets new value to "image-url-original" attribute
    MyElementProto.setImageUrlOriginal = function(val) {
        this.imageUrlOriginal = val;

        // Sets "public-id" value into <strong>
        this.imageOriginalContainer.href = this.imageUrlOriginal;
    };

    // Sets new value to "image-url" attribute
    MyElementProto.setImageName = function(val) {
        this.imageName = val;

        // Sets "public-id" value into <strong>
        this.imageLargeContainer.alt = this.imageName;
        this.nameContainer.textContent = this.imageName;
    };

    // Registers <photo-thumb> in the main document
    window.MyElement = thatDoc.registerElement('photo-view', {
        prototype: MyElementProto
    });

    // Loaded
    console.log('Loaded: photo-view');
})(window, document);
</script>
